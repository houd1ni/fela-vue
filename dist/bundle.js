"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fela=require("fela"),felaDom=require("fela-dom"),embedded=_interopDefault(require("fela-plugin-embedded")),prefixer=_interopDefault(require("fela-plugin-prefixer")),fallback=_interopDefault(require("fela-plugin-fallback-value")),unit=_interopDefault(require("fela-plugin-unit")),ramda=require("ramda"),__assign=function(){return(__assign=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function __rest(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t}function __spreadArrays(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),a=0;for(r=0;r<t;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n}var C=function(e,r){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};function _(e,r){function t(){this.constructor=e}C(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var S=function(){return(S=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)};function x(e,r,t,n){return new(t||(t=Promise))((function(a,i){function o(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){e.done?a(e.value):new t((function(r){r(e.value)})).then(o,s)}u((n=n.apply(e,r||[])).next())}))}function A(e,r){var t,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(e){i=[6,e],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function T(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function q(e){return function r(t){return 0===arguments.length||T(t)?r:e.apply(this,arguments)}}function E(e,r){return Object.prototype.hasOwnProperty.call(r,e)}var k,M=q((function(e){var r=[];for(var t in e)E(t,e)&&(r[r.length]=[t,e[t]]);return r})),N=ramda.curry((function(e,r){for(var t,n=null,a=null,i=0;i<r.length;i++)t=r[i],e.includes(t)?n&&(a=i):(null==n&&(n=i),a=null);return r.slice(n||0,a||r.length)})),W=ramda.compose(ramda.replace(/&/g,"\\&"),String),R=ramda.curry((function(e,r){var t=r.search(e);return~t?[r.slice(0,t),r.slice(t+1)]:[r]})),U=ramda.compose((function(e){var r=e[0],t=r[0],n=r[1],a=e.slice(1);return{name:t,value:n,attrs:ramda.equals(a,[null])?{}:ramda.fromPairs(a)}}),ramda.map(ramda.compose((function(e){var r=e[0],t=e[1];return r?[r,!t||decodeURIComponent(t)]:null}),R(/=/))),ramda.split(/; ?/g)),F=ramda.compose(ramda.join("; "),ramda.filter(ramda.compose(ramda.not,ramda.equals("Null"),ramda.type)),ramda.map((function(e){var r=e[0],t=e[1];return null===t?null:!0===t?r:r+"="+t})),(function(e){var r=e.name,t=e.value,n=e.attrs;return[[r,t]].concat(M(n))})),H=N("/"),z=ramda.curry((function(e,r){return S({},r,{headers:S({},r.headers,e)})})),B=(k=function(e,r,t){return x(null,void 0,void 0,(function(){return A(this,(function(n){switch(n.label){case 0:return t<r.length?[4,e(r[t])]:[3,3];case 1:return n.sent(),[4,k(e,r,++t)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},ramda.curry((function(e,r){return k(e,r,0)}))),D=ramda.curry((function(e,r){return Promise.all(r.map(e))})),Q=ramda.tap(ramda.bind(console.log,console)),V=ramda.compose(ramda.pickBy,ramda.unary,ramda.complement)(ramda.isEmpty),Y=ramda.curry((function(e,r){return ramda.compose(ramda.fromPairs,ramda.filter(ramda.complement(ramda.isNil)),ramda.map((function(r){var t=r[0],n=r[1];return null===e[t]?null:[e[t]||t,n]})),ramda.toPairs)(r)})),ot=function(){function e(e){this.pattern=/never/,this.name="Fetch",this.response=e}return Object.defineProperty(e.prototype,"type",{get:function(){return this.name.toLowerCase()},enumerable:!0,configurable:!0}),e.prototype.is=function(e){return this.pattern.test(String(e))},e.prototype.try=function(){var e=this.response;if(this.is(e.status))throw new Error("HTTP "+this.name+" error: status is "+e.status)},e}(),it=function(e){function r(r){var t=e.call(this,r)||this;return t.pattern=/4\d[13]/,t.name="Access",t.try(),t}return _(r,e),r}(ot),ut=function(e){function r(r){var t=e.call(this,r)||this;return t.pattern=/5\d\d/,t.name="Server",t.try(),t}return _(r,e),r}(ot),emptyObject=Object.freeze({}),types=Object.freeze({f:"function",o:"object",s:"string"}),camelify=function(e){return e.replace(/-(\w)/gu,(function(e,r){return r.toUpperCase()}))},memoize=function(e){var r,t=!1;return function(){return t?r:(t=!0,r=e())}},splitNonEscaped=function(e){return function(r){var t,n,a=ramda.map(ramda.length,e),i=[],o=0,s=e.length,u=r.length;for(t=0;t<u;t++)for(n=0;n<s;n++)r.slice(t,t+a[n])===e[n]&&"\\"!==r[t-1]&&(i.push(r.slice(o,t)),o=(t+=a[n]-1)+1);return o!==r.length-1&&i.push(r.slice(o)),i}},escape=function(){var e=/url\(.*?\)/g,r=/[,:;]/g;return function(t){return t.replace(e,(function(e){return e.replace(r,(function(e){return"\\"+e}))}))}}(),unescape=ramda.when(ramda.complement(ramda.isNil),ramda.replace(/([^\\])\\([^\\])/g,"$1$2")),valuable=ramda.both(ramda.complement(ramda.isEmpty),ramda.complement(ramda.isNil)),join=function(e,r){return e.reduce((function(e,t,n){return e+t+(r.length>n?r[n]:"")}),"")},isObject=ramda.compose(ramda.equals("Object"),ramda.type),deepMerge=function(e,r){for(var t in r)isObject(e[t])&&isObject(r[t])?deepMerge(e[t],r[t]):e[t]=r[t];return e},isBrowser=function(){try{return isObject(window)}catch(e){return!1}}(),pickStyle=function(e,r){return e[r]||e[camelify(r)]},pickStyles=function(e,r,t){return t.split(/[,\s\t]+/g).map((function(t){return pickStyle(r,t)||pickStyle(e(),t)||emptyObject}))},getRules=function(e,r,t,n){switch(r||(r=emptyObject),typeof t){case types.f:return[function(e){return t(e,n)}];case types.o:return[ramda.always(t)];case types.s:return pickStyles(e,r,t).reduce((function(t,a){return t.push.apply(t,getRules(e,r,a,n)),t}),[]);default:return[ramda.identity]}},Selector=function(){function e(e){this.rules={};var r=e.match(/^\.[\w-_]+/);this.s={className:r?r[0].slice(1):null,modifier:r?e.slice(r[0].length)||null:e}}return Object.defineProperty(e.prototype,"complex",{get:function(){return null!==this.s.className&&null!==this.s.modifier},enumerable:!0,configurable:!0}),e.prototype.serialize=function(){var e=this.s,r=e.className;return(r?"."+r:"")+(e.modifier||"")},e}(),extractRules=function(e,r){var t;void 0===r&&(r=0);var n,a,i,o,s,u={};for(s in e.rules)(n=e.rules[s])instanceof Selector?(a=n.complex?n.s.className:n.serialize(),i=0==r&&"."==a[0]?a.slice(1):"."==a[0]?"& "+a:a,o=n.complex?((t={})[n.s.modifier]=extractRules(n,r+1),t):extractRules(n,r+1),u[i]?deepMerge(u[i],o):u[i]=o):u[s]=n;return u},Levels=function(){function e(){this.path=[],this.path.push([new Selector("__root")])}return Object.defineProperty(e.prototype,"out",{get:function(){return extractRules(this.path[0][0])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this.path.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){for(var r=ramda.last(this.path),t=[],n=0,a=e;n<a.length;n++)for(var i=a[n],o=new Selector(i),s=0,u=r;s<u.length;s++){var c=u[s],l=o.serialize(),f=c.rules[l];t.push(f||o),f||(c.rules[l]=o)}this.path.push(t)},e.prototype.merge=function(e,r){if(valuable(r)&&valuable(e))for(var t=0,n=ramda.last(this.path);t<n.length;t++){n[t].rules[e]=r}},e.prototype.pop=function(){return this.path.pop()},e}(),analyseLine=function(){var e=/^([\w-]+)(: *| +)(.*)$/,r=/^(([\|~\$@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,t=/\s*,\s*/g,n=/(.*):$/;return function(a,i,o){var s;switch(!0){case"{"==i:a.add(o);break;case"}"==i:a.pop();break;case null!=(s=e.exec(i)):a.merge(unescape(camelify(s[1])),ramda.when(isNaN,unescape,function(e){switch(e){case"undefined":case"":return;case"null":return null;default:return isNaN(+e)?e:+e}}(s[3])));break;case null!=(s=r.exec(i)):o.splice(0),o.push.apply(o,i.split(t).map((function(e){return e.replace(n,"$1")})))}}}(),defaultOpts={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},Renderer=function(){function e(e){var r,t,n,a;void 0===e&&(e={});var i=__assign(__assign({},defaultOpts),e),o=i.method,s=i.ssr,u=i.preset,c=i.plugins,l=i.enhancers,f=__rest(i,["method","ssr","preset","plugins","enhancers"]),p=__assign(__assign({},defaultOpts.preset),u||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(__assign(__assign({},f),{enhancers:l,plugins:__spreadArrays([embedded(),prefixer(),fallback(),unit.apply(void 0,p.unit)],c)}));var d,m,h=this.renderer,y=e.defStyles;switch(typeof y){case types.o:d=(r=[y.key,y.value])[0],m=r[1];break;case types.f:d=(t=["fdef",y])[0],m=t[1]}isBrowser&&(s?felaDom.rehydrate(h):felaDom.render(h)),this._mixin=V({methods:(n={},n[o]=function(e,r){var t=this;return void 0===r&&(r={}),h.renderRule(fela.combineRules.apply(void 0,getRules(memoize((function(){return m?m(t):emptyObject})),this.style,e,this)),r)||void 0},n),computed:y?(a={},a[d]=function(){return m(this)},a):""})}return Object.defineProperty(e.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return felaDom.renderToMarkup(this.renderer)},enumerable:!0,configurable:!0}),e}(),errorString="fela-vue literal: unbalanced delimeter in functional expression !",findEntries=ramda.curry((function(e,r){var t,n,a=e[0],i=e[1],o=r.length,s=a.length,u=0,c=[];for(t=0;t<o;t++)switch(r.slice(t,t+s)){case a:t+=s-1,0==u&&(n=t),u++;break;case i:if(t+=s-1,0==--u)c.push([n,t]);else if(u<0)throw new Error(errorString)}return c})),injectExpressions=function(e){for(var r=[],t=0,n=0,a=findEntries(["[","]"],e);n<a.length;n++){var i=a[n],o=i[0],s=i[1];r.push(e.slice(t,o),"${"+e.slice(o+1,s).replace(/\$([a-zA-Z_]+)\b/g,"$$.$1")+"}"),t=s+1}return r.push(e.slice(t)),r.join("")},intoExpression=ramda.compose(ramda.join("\n"),ramda.map(injectExpressions)),createFunctions=function(e){for(var r,t,n,a=[],i=0,o=[],s=function(){if(i>0)switch(r){case"{":i++,o[o.length-1]+=r;break;case"}":if(1==--i){var e=new Function("_css,$","return _css`\n                "+intoExpression(o)+"\n              `");a.push([n,function(r,t){return e.call(t,css,r)}]),i=0,o.splice(0)}else o[o.length-1]+=r;break;default:o.push(r)}else~(t=r.indexOf("=>"))?(i=1,n=r.slice(0,t).trim().replace(/^\./,"")):a.push(r)},u=0,c=e;u<c.length;u++)r=c[u],s();return a},parse=function(){var e=["\n","\r",";"],r=function(r){return e.includes(r)},t=/(([\s^]+?\/\/.*$)|\/\*(.|[\n\r])*?\*\/)/gm;return function(n){var a=new Levels,i=[];return ramda.compose((function(){return a.out}),ramda.forEach((function(e){if("Array"==ramda.type(e))a.merge(e[0],e[1]);else if((e=e.trim())&&analyseLine(a,e,i),a.depth<1)throw new Error("lit-css parse error: unbalanced {} braces !")})),createFunctions,splitNonEscaped(e),ramda.replace(/(\{|\})/g,(function(e,t,n,a){return r(a[n-1])||(t=";"+t),r(a[n+1])||(t+=";"),t})),escape,ramda.replace(t,""))(n)}}(),css=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return parse(join(e,r))},defaultOpts$1={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1},Renderer$1=function(){function e(e){var r,t,n,a;void 0===e&&(e={});var i=__assign(__assign({},defaultOpts$1),e),o=i.method,s=i.ssr,u=i.preset,c=i.plugins,l=i.enhancers,f=__rest(i,["method","ssr","preset","plugins","enhancers"]),p=__assign(__assign({},defaultOpts$1.preset),u||{});if(e.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=fela.createRenderer(__assign(__assign({},f),{enhancers:l,plugins:__spreadArrays([embedded(),prefixer(),fallback(),unit.apply(void 0,p.unit)],c)}));var d,m,h=this.renderer,y=e.defStyles;switch(typeof y){case types.o:d=(r=[y.key,y.value])[0],m=r[1];break;case types.f:d=(t=["fdef",y])[0],m=t[1]}isBrowser&&(s?felaDom.rehydrate(h):felaDom.render(h)),this._mixin=V({methods:(n={},n[o]=function(e,r){var t=this;return void 0===r&&(r={}),h.renderRule(fela.combineRules.apply(void 0,getRules(memoize((function(){return m?m(t):emptyObject})),this.style,e,this)),r)||void 0},n),computed:y?(a={},a[d]=function(){return m(this)},a):""})}return Object.defineProperty(e.prototype,"mixin",{get:function(){return Object.freeze(this._mixin)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return felaDom.renderToMarkup(this.renderer)},enumerable:!0,configurable:!0}),e}();exports.Renderer=Renderer$1,exports.css=css;
