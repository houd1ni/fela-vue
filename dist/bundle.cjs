"use strict";var e=require("pepka"),t=require("fela"),r=require("fela-dom"),s=require("fela-plugin-embedded"),n=require("fela-plugin-prefixer"),o=require("fela-plugin-fallback-value"),i=require("fela-plugin-unit");const l=Object.freeze({}),c=Object.freeze({f:"function",o:"object",s:"string"}),a=e=>e.replace(/-(\w)/gu,((e,t)=>t.toUpperCase())),u=(()=>{const e=/url\(.*?\)/g,t=/[,:;]/g;return r=>r.replace(e,(e=>e.replace(t,(e=>`\\${e}`))))})(),f=e.when(e.complement(e.isNil),e.replace(/([^\\])\\([^\\])/g,"$1$2")),p=e.both(e.complement(e.isEmpty),e.complement(e.isNil));e.compose(e.equals("Object"),e.type);const h=e.compose(e.equals("Window"),e.type),d=(()=>{try{return h(window)}catch{return!1}})(),m=e.map(e.ifElse(e.compose(e.equals("Function"),e.type),e.identity,e.prop("default"))),g=(t,r)=>e.compose(e.map((([e,t])=>((e,t,r)=>r(...e[t]||[]))(r,e,t))),e.toPairs,m)(t),b=/((\s+?\/\/.*$)|\/\*(.|[\n\r])*?\*\/)/gm,y=/[\n\r]{2,}|(?:;\s)/g,w=/(^|\r|\n)+[\t ]+/g,$=/[;\n\r]+/g,x=/(?:(}|{|]|)^[;\n\r ]+)|(?:[;\n\r ]+($|}|{|]))/g,C=/^([\w-]+)(: *| +)(.*)$/,S=/(^|\r|\n|;|{)\s*([a-z-]+)[ :][\t ]*?:?[\t ]*?([^;\r\n]+)/g,v=/^(([\|~\$@>\*\.:&\(\)\^="\-\[\]]+).*[ ,]*)+:?$/,N=/^\.\.\.(\S*)$/,k=/\s*,\s*/g,_=/(.*):$/;class j{s;rules={};__selector__=!0;get complex(){return null!==this.s.className&&null!==this.s.modifier}static isSelector(e){return Boolean(e&&e.__selector__)}serialize(){const{className:e,modifier:t}=this.s;return(e?`.${e}`:"")+(t||"")}findClass(e,t=this){if(t.s.className===e)return t;for(const r in t.rules){const s=t.rules[r];if(j.isSelector(s)){const t=s.findClass(e);if(t)return t}}return null}constructor(e){const t=e.match(/^\.[\w-_]+/);this.s={className:t?t[0].slice(1):null,modifier:t?e.slice(t[0].length)||null:e}}}const q=(t,r=0)=>{const s={};let n,o,i,l,c;for(c in t.rules)n=t.rules[c],j.isSelector(n)?(o=n.complex?n.s.className:n.serialize(),i=0==r&&"."==o[0]?o.slice(1):"."==o[0]?`& ${o}`:o,l=n.complex?{[n.s.modifier]:q(n,r+1)}:q(n,r+1),s[i]?e.qmergeDeep(s[i],l):s[i]=l):s[c]=n;return s};class O{path=[];get out(){return q(this.path[0][0])}get depth(){return this.path.length}add(t){const r=e.last(this.path),s=[];for(const e of t){const t=new j(e);for(const e of r){const r=t.serialize(),n=e.rules[r];s.push(n||t),n||(e.rules[r]=t)}}this.path.push(s)}merge(t,r){if(p(r)&&p(t))for(const s of e.last(this.path))s.rules[t]=r}findClass(e){for(const t of this.path)for(const r of t){const t=r.findClass(e);if(t)return t}return null}pop(){return this.path.pop()}constructor(){this.path.push([new j("__root")])}}const P=Symbol("Placeholder"),z=e=>{let t=0;for(const r of e)r!==P&&t++;return t},A=(e,t)=>{const r=e.length,s=e.slice(),n=t.length;let o=n,i=0;for(;o&&i<r;i++)s[i]===P&&(s[i]=t[n-o],o--);for(i=r;o;i++,o--)s[i]=t[n-o];return s},E=(e,t,r)=>{const s=e.length-t.length-z(r);if(s<1)return e(...A(t,r));{const n=(...s)=>E(e,A(t,r),s);return n.$args_left=s,n}},R=e=>(...t)=>e.length>z(t)?E(e,[],t):e(...t),B=e=>function(t){return t===P?e:e(t)};function F(e){return function(t,r){const s=t===P,n=arguments.length;if(1===n&&s)throw new Error("Senseless placeholder usage.");return arguments.length>1?s?B((t=>e(t,r))):e(t,r):r=>e(t,r)}}function W(e){return R(e)}const L=void 0,M=1/0,U=e=>typeof e,D=e=>null===e,T={u:"U",b:"B",n:"N",s:"S",f:"F"},Z=e=>{const t=U(e);return"object"===t?D(e)?"Null":e.constructor.name:T[t[0]]+t.slice(1)},G=F(((e,t)=>(t.push(e),t))),H=W(((e,t,r)=>r.reduce(e,t))),I=W(((e,t,r)=>{for(let s in r)switch(Z(r[s])){case"Array":if(e>1&&"Array"===Z(t[s]))switch(e){case 2:const n=t[s],o=r[s];for(const t in o)n[t]?I(e,n[t],o[t]):n[t]=o[t];break;case 3:t[s].push(...r[s])}else t[s]=r[s];break;case"Object":if("Object"===Z(t[s])){I(e,t[s],r[s]);break}default:t[s]=r[s]}return t}));I(1),I(2),I(3);const J=F(((e,t)=>{const r=Z(e);if(r===Z(t)&&("Object"===r||"Array"==r)){if(D(e)||D(t))return e===t;if(e===t)return!0;for(const r of[e,t])for(const s in r)if(!(r===t&&s in e||r===e&&s in t&&J(e[s],t[s])))return!1;return!0}return e===t})),K=R(((e,t,r,s)=>e(s)?t(s):r(s))),Q=(...e)=>(...t)=>{let r,s=!0;for(let n=re(e)-1;n>-1;n--)s?(s=!1,r=e[n](...t)):r=r===P?e[n]():e[n](r);return r},V=F(((e,t)=>t[e])),X=F(((e,t)=>{if((e=>"string"===U(e))(t))return t.includes(e);for(const r of t)if(J(r,e))return!0;return!1})),Y=W(((e,t,r)=>r.slice(e,(e=>"number"==U(e))(t)?t:M))),ee=V(0);Y(1,M);const te=e=>D(e)||(e=>e===L)(e),re=e=>e.length,se=e=>()=>e,ne=F(((e,t)=>t.split(e))),oe=e=>H(((e,t)=>X(t,e)?e:G(t,e)),[],e),ie=W(((e,t,r)=>({...r,[e]:t}))),le=F(((e,t)=>t[e])),ce=W(((e,t,r)=>K(re,(()=>te(r)?e:Q(K(te,se(e),(r=>ce(e,Y(1,M,t),r))),(e=>F(((t,r)=>e(r,t))))(le)(r),ee)(t)),se(r),t)));ce(L);const ae=/^(.*?)(8|16|32|64)(Clamped)?Array$/,ue=(e,t=!1)=>{const r=Z(e);switch(r){case"Null":case"String":case"Number":case"Boolean":case"Symbol":return e;case"Array":return t?[...e]:pe(Q(ue,((...e)=>e[0])),e);case"Object":if(t)return{...e};const s={};for(let t in e)s[t]=ue(e[t]);return s;default:return ae.test(r)?e.constructor.from(e):e}},fe=W(((e,t,r)=>H(e,ue(t),r))),pe=F(((e,t)=>t.map(e))),{floor:he}=Math;let de,me;const ge=Q((e=>fe(((e,t)=>ie(...t,e)),{},e)),pe(((e,t)=>[e,t])),ne(""));(e=>{if(!(e=>Q(J(re(e)),re,oe,ne(""))(e))(e))throw new Error("Not all chars are unique!");de=e,me=de.length,ge(de)})("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");const be="\ntop flex grid overflow transform transition-duration max-height\nmargin margin-top margin-left margin-bottom margin-right justify-content\nborder width height border-radius background bottom position align-items\ncenter bottom absolute relative float right opacity z-index min-width\nmin-height border-top border-bottom filter fixed left color space-between\nfont-weight font-size none hidden auto display block inline inline-block\npadding padding-top padding-bottom padding-left padding-right text-align\nflex-direction column box-shadow rotate 100%\n".replace(/\s+/g,",").split(/[, ]/g).filter(Boolean),ye=()=>{let e=0;return()=>`a${(e=>{let t="";for(;e>0;)t=de[e%me]+t,e=he(e/me);return t||"0"})(e++)}`},we=e=>{const t=ye(),{compose:r,fromPairs:s,map:n,reverse:o,toPairs:i}=e,l=r(s,n((e=>[e,t()])))(be);return{dic:l,dicRev:r(s,n(o),i)(l)}};let $e=!1;const xe=we({compose:e.compose,fromPairs:e.fromPairs,map:e.map,reverse:e.reverse,toPairs:e.toPairs}),Ce=(()=>{const t=C,r=v,s=N,n=k,o=_,i=e.when((()=>$e),(e=>xe.dicRev[e]||e));return(l,c,u)=>{let p;switch(!0){case"{"==c:l.add(u);break;case"}"==c:l.pop();break;case null!==(p=s.exec(c)):const h=l.findClass(p[1]);if(h)for(const e in h.rules)l.merge(e,h.rules[e]);break;case null!==(p=t.exec(c)):l.merge(f(a(i(p[1]))),e.when(isNaN,f,(e=>{switch(e){case"undefined":case"false":case"":return;case"null":return null;default:return isNaN(+e)?e:+e}})(i(p[3]))));break;case null!==(p=r.exec(c)):u.splice(0),u.push(...c.split(n).map((e=>e.replace(o,"$1"))))}}})(),Se=e.curry((([e,t],r)=>{let s,n,o=r.length,i=e.length,l=0,c=[];for(s=0;s<o;s++)switch(r.slice(s,s+i)){case e:s+=i-1,0==l&&(n=s),l++;break;case t:if(s+=i-1,l--,0==l)c.push([n,s]);else if(l<0)throw new Error("fela-vue literal: unbalanced delimeter in functional expression !")}return c})),ve=e.compose(e.join("\n"),e.map((e=>{const t=[];let r=0;for(let[s,n]of Se(["[","]"],e))t.push(e.slice(r,s),`\${${e.slice(s+1,n).replace(/(\W|^)\$([a-zA-Z_]+)\b/g,"$1$$ps.$2").replace(/(\W|^)@(.+?)\b/g,"$1$t.$2")}}`),r=n+1;return t.push(e.slice(r)),t.join("")}))),Ne=e=>t=>{const r=[];let s,n,o,i=0,l=[];for(s of t)if(i>0)switch(s){case"{":i++,l[l.length-1]+=s;break;case"}":if(1==--i){if(e){const e=`($ps, $t) => css\`${ve(l)}\``;r.push([o,e])}else{const e=new Function("$t,css,$ps",`return css\`\n                ${ve(l)}\n              \``);r.push([o,(t,r)=>e(r,Pe,t)])}i=0,l.splice(0)}else l[l.length-1]+=s;break;default:l.push(s)}else n=s.indexOf("=>"),~n?(i=1,o=s.slice(0,n).trim().replace(/^\./,"")):r.push(s);return r},ke=(()=>{const t=["\n","\r",";"],r=e=>t.includes(e),s=b;return(n,o=!1)=>{const i=new O,l=[];return e.compose((()=>i.out),e.forEach((t=>{if("Array"==e.type(t))i.merge(t[0],t[1]);else if(t&&Ce(i,t,l),i.depth<1)throw new Error("lit-css parse error: unbalanced {} braces !")})),Ne(o),e.filter(e.complement(e.isEmpty)),e.map(e.trim),(c=t,t=>{const r=e.map(e.length,c),s=[];let n,o,i=0,l=c.length,a=t.length;for(n=0;n<a;n++)for(o=0;o<l;o++)t.slice(n,n+r[o])===c[o]&&"\\"!==t[n-1]&&(s.push(t.slice(i,n)),n+=r[o]-1,i=n+1);return i!==t.length-1&&s.push(t.slice(i)),s}),e.replace(/(\{|\})/g,((e,t,s,n)=>(r(n[s-1])||(t=";"+t),r(n[s+1])||(t+=";"),t))),u,e.replace(s,""))(n);var c}})(),_e=(e,t)=>e[t]||e[a(t)],je=(t,r,s,n)=>{switch(r||(r=l),typeof s){case c.f:return[s.name,[e=>s(e,n)]];case c.o:return[s.className,[e.always(s)]];case c.s:const o=((e,t,r)=>r.split(/[,\s\t]+/g).map((r=>[r,_e(t,r)||_e(e(),r)||l])))(t,r,s),i=[],a=[];for(const[e,s]of o)i.push(e),a.push(...je(t,r,s,n)[1]);return[i.join("_"),a];default:return["",[e.identity]]}},qe=function(t,r){if(d)for(const s in t){const n=t[s],o=[];for(const t in n){const r=n[t];"Object"==e.type(r)?this.setClasses(r,document.querySelectorAll(s+t)):o.push([t,r])}if(o.length){const t=(0,this.renderClasses)(null,e.fromPairs(o)).split(" ");(r||document.querySelectorAll(s)).forEach((e=>e.classList.add(...t)))}}},Oe=e=>(t,...r)=>ke(((e,t)=>e.reduce(((e,r,s)=>e+r+(t.length>s?t[s]:"")),""))(t,r),e),Pe=Oe(!1),ze=Oe(!0),Ae={method:"f",defStyles:void 0,plugins:[],enhancers:[],preset:{unit:[]},ssr:!1};class Ee{static devClassNames=!1;renderer;_mixin;renderClasses;styl;get mixin(){return Object.freeze(this._mixin)}get style(){return r.renderToMarkup(this.renderer)}setClasses=qe;constructor(a={}){const{method:u,ssr:f,preset:p,plugins:h,enhancers:m,...b}=((t,r={})=>e.compose(e.fromPairs,e.map((([t,s])=>{switch(e.type(s)){case"Array":return[t,[...s,...r[t]||[]]];case"Object":return[t,{...s,...r[t]||{}}];default:return[t,r[t]||s]}})),e.toPairs)(t))(Ae,a),y={...Ae.preset,...p||{}},w=this;if(a.fdef)throw new Error("fela-vue: Change deprecated `fdef` to `defStyles`!");this.renderer=t.createRenderer({...b,enhancers:m,plugins:g([i,s,n,o,...h],{0:y.unit})});const{renderer:$}=this,x=a.defStyles;let C,S;switch(typeof x){case c.o:[C,S]=[x.key,x.value];break;case c.f:[C,S]=["fdef",x]}d&&(f?r.rehydrate($):r.render($)),this.renderClasses=(e,r,s={})=>{const[n,o]=je((e=>{let t,r=!1;return()=>r?t:(r=!0,t=e())})((()=>S?S(this):l)),e,r,this);return $.renderRule(((e,t,r)=>{if(r&&t&&"anonymous"!==t)return{[t]:(t,r)=>e(t,r)}[t];return e})(t.combineRules(...o),n,Ee.devClassNames),s)||void 0},this.styl=e=>(...t)=>this.renderClasses(e,...t),this._mixin=e.filter(e.identity,{methods:{[u]:function(...e){return w.renderClasses.call(this,this.style,...e)}},computed:x&&{[C](){return S(this)}}})}}let Re=null;exports.Renderer=Ee,exports.SvelteRenderer=class extends Ee{static get devClassNames(){return Ee.devClassNames}static set devClassNames(e){Ee.devClassNames=e}f;fdef;getCSS(){return e=>{const t={style:e,fdef:this.fdef};return(e,r)=>this.f.call(t,e,r)}}getLiteralCSS(){const e=this.getCSS();return(...t)=>e(Pe(...t))}constructor(e={}){super(e);const t=this.mixin;this.f=t.methods.f,this.fdef="function"==typeof e.defStyles?t.computed.fdef:e.defStyles&&t.computed[e.defStyles.key]}},exports.__specialcss=ze,exports.css=Pe,exports.rollupCSSCompression=function(){return{name:"fela-vue-compression",async transform(e){const t=await import("pepka"),{compose:r,take:s}=t;Re||(Re=we(t));const n=((e,t)=>{const{compose:r,replace:s,trim:n}=t;return r(s(x,"$2"),s($,";"),s(y,"\n"),s(w,"$1"),s(b,""),s(S,((t,r,s,o)=>o?r+(s&&o?`${n(e.dic[s]||s)}:${n(e.dic[o]||o)};`:n(s?t.replace(s,e.dic[s]||s):o?t.replace(s,e.dic[o]||o):t)):"")))})(Re,t);let o=e;try{o=e.replace(/css\`((.|\s)*?)\`/g,r((e=>`css\`${n(e)}\``),s(1)))}catch(e){console.warn(e)}return{code:o,map:null}}}},exports.setCompression=e=>$e=e;
